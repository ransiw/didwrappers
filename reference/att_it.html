<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Unit-Time Average Treatment Effects — att_it • didwrappers</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Unit-Time Average Treatment Effects — att_it"><meta name="description" content="Computes the 2x2 DID estimate at the unit-time level and allows for unit-level covariate matching in a staggered treatment setting.
The original package by Brantly Callaway and Pedro Santa'Anna (did) only allows for group-time ATTs
where units treated in the same period is in a single group. Unlike the related did package, there is no provision for repeated cross-sections."><meta property="og:description" content="Computes the 2x2 DID estimate at the unit-time level and allows for unit-level covariate matching in a staggered treatment setting.
The original package by Brantly Callaway and Pedro Santa'Anna (did) only allows for group-time ATTs
where units treated in the same period is in a single group. Unlike the related did package, there is no provision for repeated cross-sections."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">didwrappers</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/comparison_with_did.html">Comparison between did and didwrappers</a></li>
    <li><a class="dropdown-item" href="../articles/minimum-wage.html">Minimum wage example</a></li>
    <li><a class="dropdown-item" href="../articles/my-article.html">Democratization on growth</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ransiw/didwrappers/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Unit-Time Average Treatment Effects</h1>
      <small class="dont-index">Source: <a href="https://github.com/ransiw/didwrappers/blob/main/R/att_it.R" class="external-link"><code>R/att_it.R</code></a></small>
      <div class="d-none name"><code>att_it.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Computes the 2x2 DID estimate at the unit-time level and allows for unit-level covariate matching in a staggered treatment setting.
The original package by Brantly Callaway and Pedro Santa'Anna (<code>did</code>) only allows for group-time ATTs
where units treated in the same period is in a single group. Unlike the related <code>did</code> package, there is no provision for repeated cross-sections.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">att_it</span><span class="op">(</span></span>
<span>  <span class="va">yname</span>,</span>
<span>  <span class="va">tname</span>,</span>
<span>  <span class="va">idname</span>,</span>
<span>  <span class="va">gname</span>,</span>
<span>  cohortnames <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  xformla <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">data</span>,</span>
<span>  panel <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  control_group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"nevertreated"</span>, <span class="st">"notyettreated"</span><span class="op">)</span>,</span>
<span>  anticipation <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  weightsname <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  alp <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  bstrap <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  cband <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  biters <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  clustervars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  est_method <span class="op">=</span> <span class="st">"dr"</span>,</span>
<span>  overlap <span class="op">=</span> <span class="st">"trim"</span>,</span>
<span>  base_period <span class="op">=</span> <span class="st">"varying"</span>,</span>
<span>  print_details <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  pl <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  cores <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-yname">yname<a class="anchor" aria-label="anchor" href="#arg-yname"></a></dt>
<dd><p>the name of the outcome variable in the <code>data</code></p></dd>


<dt id="arg-tname">tname<a class="anchor" aria-label="anchor" href="#arg-tname"></a></dt>
<dd><p>the name of the column containing the time periods in <code>data</code>. Must be numeric</p></dd>


<dt id="arg-idname">idname<a class="anchor" aria-label="anchor" href="#arg-idname"></a></dt>
<dd><p>the individual (cross-sectional unit) id name in <code>data</code>. Cannot be missing and must be numeric.</p></dd>


<dt id="arg-gname">gname<a class="anchor" aria-label="anchor" href="#arg-gname"></a></dt>
<dd><p>the name of the variable in <code>data</code> that
contains the first period when a particular observation is treated.
This should be a positive number for all observations in treated groups.
It defines which "treatment-group" a unit belongs to. A zero (0) value is considered to be a unit that is never treated.
A unit treated after the last period in <code>tname</code> is also considered never treated.</p></dd>


<dt id="arg-cohortnames">cohortnames<a class="anchor" aria-label="anchor" href="#arg-cohortnames"></a></dt>
<dd><p>the names of additional aggregation variables in <code>data</code>.</p></dd>


<dt id="arg-xformla">xformla<a class="anchor" aria-label="anchor" href="#arg-xformla"></a></dt>
<dd><p>a formula for the covariates to include in the
model.  It should be of the form <code>~ X1 + X2</code>. An intercept is automatically included. Default
is NULL which is equivalent to <code>xformla=~1</code>.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>the name of the data.frame that contains the data.</p></dd>


<dt id="arg-panel">panel<a class="anchor" aria-label="anchor" href="#arg-panel"></a></dt>
<dd><p>if panel is TRUE, the data is coerced to a balanced panel on the. Default is TRUE.</p></dd>


<dt id="arg-control-group">control_group<a class="anchor" aria-label="anchor" href="#arg-control-group"></a></dt>
<dd><p>which units to use the control group.
The default is "nevertreated" which sets the control group
to be the group of units that never participate in the
treatment.  This group does not change across groups or
time periods.  The other option is to set
<code>group="notyettreated"</code>.  In this case, the control group
is set to the group of units that have not yet participated
in the treatment in that time period.  This includes all
never treated units, but it includes additional units that
eventually participate in the treatment, but have not
participated yet.</p></dd>


<dt id="arg-anticipation">anticipation<a class="anchor" aria-label="anchor" href="#arg-anticipation"></a></dt>
<dd><p>the number of time periods before participating
in the treatment where units can anticipate participating in the
treatment and therefore it can affect their untreated potential outcomes.</p></dd>


<dt id="arg-weightsname">weightsname<a class="anchor" aria-label="anchor" href="#arg-weightsname"></a></dt>
<dd><p>the name of the column containing the sampling weights.
If not set, all observations have same weight.</p></dd>


<dt id="arg-alp">alp<a class="anchor" aria-label="anchor" href="#arg-alp"></a></dt>
<dd><p>the significance level, default is 0.05</p></dd>


<dt id="arg-bstrap">bstrap<a class="anchor" aria-label="anchor" href="#arg-bstrap"></a></dt>
<dd><p>boolean for whether or not to compute standard errors using
the multiplier bootstrap.  If standard errors are clustered, then one
must set <code>bstrap=TRUE</code>. Default is <code>TRUE</code> (in addition, cband
is also by default <code>TRUE</code> indicating that uniform confidence bands
will be returned.  If bstrap is <code>FALSE</code>, then analytical
standard errors are reported.</p></dd>


<dt id="arg-cband">cband<a class="anchor" aria-label="anchor" href="#arg-cband"></a></dt>
<dd><p>boolean for whether or not to compute a uniform confidence
band that covers all of the group-time average treatment effects
with fixed probability <code>1-alp</code>.  In order to compute uniform confidence
bands, <code>bstrap</code> must also be set to <code>TRUE</code>.  The default is
<code>TRUE</code>.</p></dd>


<dt id="arg-biters">biters<a class="anchor" aria-label="anchor" href="#arg-biters"></a></dt>
<dd><p>the number of bootstrap iterations to use.  The default is 1000,
and this is only applicable if <code>bstrap=TRUE</code>.</p></dd>


<dt id="arg-clustervars">clustervars<a class="anchor" aria-label="anchor" href="#arg-clustervars"></a></dt>
<dd><p>a vector of variables names to cluster on.  At most, there
can be two variables (otherwise will throw an error) and one of these
must be the same as idname which allows for clustering at the individual
level. By default, we cluster at individual level (when <code>bstrap=TRUE</code>)</p></dd>


<dt id="arg-est-method">est_method<a class="anchor" aria-label="anchor" href="#arg-est-method"></a></dt>
<dd><p>the method to compute group-time average treatment effects.  The default is "dr" which uses the doubly robust
approach in the <code>DRDID</code> package.  Other built-in methods
include "ipw" for inverse probability weighting (Hajek type) and "reg" for
first step regression estimators.</p></dd>


<dt id="arg-overlap">overlap<a class="anchor" aria-label="anchor" href="#arg-overlap"></a></dt>
<dd><p>the treatment of units that violate overlap conditions when the <code>est_method</code> is "dr" or "ipw".
The default, "trim", is to drop the unit but report the calculated ATT for further analysis. Overlap is violated if the maximum pscore exceeds 0.999
The other option, "retain" retains these units for inference.</p></dd>


<dt id="arg-base-period">base_period<a class="anchor" aria-label="anchor" href="#arg-base-period"></a></dt>
<dd><p>whether to use a "varying" base period or a
"universal" base period for placebo tests. A varying base period calculates a pseudo-ATT for every two consecutive pre-treatment periods.
A universal base period fixes the base period to always be (g-anticipation-1).  Either choice results in the same
post-treatment estimates of ATT(g,t)'s.</p></dd>


<dt id="arg-print-details">print_details<a class="anchor" aria-label="anchor" href="#arg-print-details"></a></dt>
<dd><p>whether or not to show details/progress of computations.
Default is <code>FALSE</code>.</p></dd>


<dt id="arg-pl">pl<a class="anchor" aria-label="anchor" href="#arg-pl"></a></dt>
<dd><p>whether or not to use parallel processing</p></dd>


<dt id="arg-cores">cores<a class="anchor" aria-label="anchor" href="#arg-cores"></a></dt>
<dd><p>the number of cores to use for parallel processing</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An <code><a href="MP_i.html">MP_i</a></code> object containing all the results for unit-time treatment effects.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># run the function with the default settings and default data</span></span></span>
<span class="r-in"><span><span class="va">attobject</span> <span class="op">=</span> <span class="fu">att_it</span><span class="op">(</span>yname <span class="op">=</span> <span class="st">"y"</span>, tname <span class="op">=</span> <span class="st">"time"</span>, gname <span class="op">=</span> <span class="st">"treatg"</span>, idname <span class="op">=</span><span class="st">"unit"</span>, data <span class="op">=</span> <span class="fu"><a href="sim_data.html">sim_data</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ransi Clark.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

